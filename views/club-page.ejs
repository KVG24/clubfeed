<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="/styles.css" />
        <title><%= club.name %></title>
    </head>
    <body>
        <h1 class="club-name"><%= club.name %></h1>
        <h2>Message Wall</h2>
        <a class="btn" href="/clubs">Back to clubs</a>
        <% if (advancedRights) { %>
        <form
            class="post-msg-form"
            action="/clubs/<%= club.club_id %>/post-message"
            method="post"
        >
            <textarea
                class="post-msg-textarea"
                name="message"
                id="message"
                rows="3"
                required
            ></textarea>
            <button class="post-msg-submit-btn" type="submit">
                <img src="/icons/send.svg" />
            </button>
        </form>
        <% } %>
        <div class="messages">
            <% messages.forEach(message => { %> <% if (advancedRights) { %>
            <div class="message">
                <p class="msg-username"><%= message.username %>:</p>
                <p class="msg-text"><%= message.text %></p>
                <p class="msg-date"><%= message.created_at %></p>
                <% if (message.user_id == user.user_id || user.is_admin) { %>
                <form
                    class="delete-msg-form"
                    action="/clubs/<%= club.club_id %>/delete-message/<%= message.message_id %> "
                    method="post"
                >
                    <button
                        onclick="return confirm('Are you sure you want to delete this message?');"
                        class="delete-msg-button"
                        type="submit"
                    >
                        <img src="/icons/delete.svg" />
                    </button>
                </form>
                <% } %>
            </div>
            <% } else { %>
            <div class="message">
                <p class="msg-text"><%= message.text %></p>
            </div>
            <% } %> <% }) %>
        </div>
    </body>
</html>
